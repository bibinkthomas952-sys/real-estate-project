<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment | {{ property.title }}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body class="bg-light">
  <div class="container py-5">
    <div class="card shadow-lg mx-auto p-4" style="max-width: 500px;">
      <h3 class="text-center mb-4">Payment Summary</h3>
      <p class="text-muted text-center mb-2">Property: <strong>{{ property.title }}</strong></p>
      <p class="text-center mb-4 text-success">Total Amount: <strong>â‚¹{{ amount_rupees }}</strong></p>

      <div class="text-center">
        <button id="rzp-button" class="btn btn-success px-4 py-2">ðŸ’³ Pay â‚¹{{ amount_rupees }}</button>
      </div>
    </div>
  </div>

  <script>
    var options = {
        "key": "rzp_test_SROSnyInFv81S4",
        "amount": "{{ amount_paise }}",  // Required internally
        "currency": "INR",
        "name": "{{ property.title }}",
        "description": "Property Payment",
        "display_amount": "{{ amount_rupees }}",  // ðŸ‘ˆ shows â‚¹1000 to user
        "display_currency": "INR",               // ðŸ‘ˆ keeps it INR
        "handler": function (response){
            window.location.href = "/payment_success/?payment_id=" + response.razorpay_payment_id +
                                   "&amount={{ amount_rupees }}" +
                                   "&property_id={{ property.id }}";
        },
        "theme": { "color": "#28a745" }
    };

    var rzp1 = new Razorpay(options);
    document.getElementById('rzp-button').onclick = function(e){
        rzp1.open();
        e.preventDefault();
    }
  </script>
</body>
</html>
